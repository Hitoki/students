{% extends 'base.html'%}
{% load custom_tags %}



{% block students %}
    {% verbatim %}
    <div class="container" ng-controller="StudentsController as student">

            <div class="modal fade" id="add-student">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title">Add new Student</h4>
                        </div>
                        <div class="modal-body">
                            <form action="" method="post" class="form-signin" role="form" >
                                <div class="form-group">
                                    <label for="first_name">First name</label>
                                    <input class="form-control" type="text" id="first_name" ng-model="add_student.first_name">
                                </div>
                                <div class="form-group">
                                    <label for="second_name">Second name</label>
                                    <input class="form-control" type="text" id="second_name" ng-model="add_student.second_name">
                                </div>
                                <div class="form-group">
                                    <label for="last_name">Last name</label>
                                    <input class="form-control" type="text" id="last_name" ng-model="add_student.last_name">
                                </div>
                                <div class="form-group">
                                    <label for="birth_date">Birth date</label>
                                    <input class="form-control" type="datetime" id="birth_date" placeholder="1992-10-28" ng-model="add_student.birth_date">
                                </div>
                                <div class="form-group">
                                    <label for="student_card">Card ID</label>
                                    <input class="form-control" type="text" id="student_card" ng-model="add_student.student_card">
                                </div>
                                <div class="form-group" ng-controller="GroupsController as group">
                                    <label for="group">Group</label>
                                    <select class="form-control" id="group" ng-model="add_student.group" ng-options="obj.title for obj in students_groups track by obj.id"></select>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            <input class="btn btn-primary" type="button" value="Confirm" ng-click="createStudent()"/>
                        </div>
                    </div>
                </div>
            </div>

    </div>
    {% endverbatim %}
{% endblock %}

{% block groups %}
    {% verbatim %}
        <div class="container" ng-controller="GroupsController as group">
            <div class="col-xs-6 col-md-4" ng-repeat="group in students_groups">
                <div class="panel panel-default">
                    <div class="panel-heading">{{ group.title }}
                        <span class="badge" title="{{ group.students.length }} student(s) in group" ng-bind="group.students.length"></span>
                        <div class="btn-group pull-right" role="group">
                            <button title="Edit group" class="btn btn-default btn-xs"><span class="glyphicon glyphicon-pencil" ng-click="showEditForm(group)"></span></button>
                            <button title="Add new student to the group" class="btn btn-default btn-xs"><span class="glyphicon glyphicon-plus" ng-click="showAddSinGForm(group)"></span></button>
                            <button title="Delete group" class="btn btn-default btn-xs"><span class="glyphicon glyphicon-remove" ng-click="deleteGroup($index, group.id)"></span></button>
                        </div>
                    </div>
                    <div class="panel-body">
                        <span>{{ group.steward.student_name }}
                            <button class="btn btn-success btn-xs pull-right" data-toggle="modal" data-target="#student-list-{{ group.id }}">
                                <span class="glyphicon glyphicon-list"></span>
                            </button>
                        </span>
                        <span ng-hide="group.steward">No Steward Yet. <button class="btn btn-link btn-xs" ng-click="showEditForm(group)">Edit?</button></span>
                    </div>
                </div>

                <div class="modal fade" id="student-list-{{ group.id }}">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title">Students List of group - {{ group.title }}</h4>
                            </div>
                            <div class="modal-body">
                                <table class="table">
                                    <tr ng-repeat="student in group.students">
                                        <td>{{ student.student_name }}</td>
                                        <td>{{ student.birth_date }}</td>
                                        <td>{{ student.student_card }}</td>
                                    </tr>
                                </table>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal fade" id="edit-group">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title">Edit {{ edit_group.title }} group</h4>
                        </div>
                        <div class="modal-body">
                            <form action="" method="post" class="form-signin" role="form">
                                <div class="form-group">
                                    <label for="title">Group title:</label>
                                    <input class="form-control" type="text" id="title" ng-model="edit_group.title">
                                </div>
                                <div class="form-group">
                                    <label for="steward">Edit Steward:</label>
                                    <select class="form-control" id="steward" ng-model="edit_group.steward" ng-options="obj.student_name for obj in edit_group.students track by obj.id"></select>
                                </div>
                                <div class="form-group">
                                    <label for="students">Edit Students:</label>
                                        <div ng-repeat="student in edit_group.students" id="students">
                                            {{ student.student_name }}<button title="Delete student" class="btn btn-default btn-xs">
                                            <span class="glyphicon glyphicon-remove" ng-click="showDeleteForm(student)"></span></button><br>
                                        </div>
                                    </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            <input class="btn btn-primary" type="button" value="Confirm" ng-click="saveGroup()" />
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal fade" id="add-student-to-group" ng-controller="StudentsController">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title">Add new student to group {{ sin_groups.title }}.</h4>
                        </div>
                        <div class="modal-body">
                            <form action="" method="post" class="form-signin" role="form" >
                                <div class="form-group">
                                    <label for="first_name">First name</label>
                                    <input class="form-control" type="text" id="first_name" ng-model="add_student.first_name">
                                </div>
                                <div class="form-group">
                                    <label for="second_name">Second name</label>
                                    <input class="form-control" type="text" id="second_name" ng-model="add_student.second_name">
                                </div>
                                <div class="form-group">
                                    <label for="last_name">Last name</label>
                                    <input class="form-control" type="text" id="last_name" ng-model="add_student.last_name">
                                </div>
                                <div class="form-group">
                                    <label for="birth_date">Birth date</label>
                                    <input class="form-control" type="datetime" id="birth_date" placeholder="1992-10-28" ng-model="add_student.birth_date">
                                </div>
                                <div class="form-group">
                                    <label for="student_card">Card ID</label>
                                    <input class="form-control" type="text" id="student_card" ng-model="add_student.student_card">
                                </div>
                                <div class="form-group">
                                    <label for="group"></label>
                                    <input class="form-control" type="hidden" id="group" ng-model="student.group" value="{{ students_groups.title }}">
                                </div>
                            </form>
                        </div>
                        <div class="modal-body">
                            <pre>
                                <table class="table">
                                    <h5>Current students:</h5>
                                    <tr ng-repeat="student in sin_groups.students">
                                        <td>{{ student.student_name }}</td>
                                        <td>{{ student.birth_date }}</td>
                                        <td>{{ student.student_card }}</td>
                                    </tr>
                                    <tr>
                                        <td><span ng-bind="student.student_name()"></span></td>
                                        <td><span ng-bind="student.birth_date()"></span></td>
                                        <td><span ng-bind="student.student_card()"></span></td>
                                    </tr>
                                </table>
                            </pre>
                        </div>

                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            <input class="btn btn-primary" type="button" value="Confirm" ng-click="addSinG()"/>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal fade" id="add-group">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title">Add new group</h4>
                        </div>
                        <div class="modal-body">
                            <form action="" method="post" class="form-signin" role="form" >
                                <div class="form-group">
                                    <label for="title">Group title:</label>
                                    <input class="form-control" type="text" id="title" placeholder="Enter title" ng-model="add_group.title">
                                </div>

                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            <input class="btn btn-primary" type="button" value="Confirm" ng-click="addGroup()"/>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal fade" id="delete-student" ng-controller="StudentsController as student">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title">Delete {{ students_groups.students.student_name }} student profile?</h4>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            <input class="btn btn-primary" type="button" value="Delete" ng-click="deleteStudent($index, students_groups.students.id)"/>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    {% endverbatim %}

{% endblock %}